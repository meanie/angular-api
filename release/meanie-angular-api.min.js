/**
 * meanie-angular-api - v1.0.1 - 23-9-2015
 * https://github.com/meanie/angular-api
 *
 * Copyright (c) 2015 Adam Buczynski <me@adambuczynski.com>
 * License: MIT
 */
!function(t,e,n){"use strict";e.module("Api.Action.Service",["Url.Service"]).factory("$apiAction",["$q","$injector","$log","$url",function(t,n,r,i){function o(t){return t?n.has(t)?t:(r.warn("Unknown model class/service:",t),null):null}function s(t,n){e.extend(this,t),this.url=i.concat(n.url,this.url||""),this.model=this.model||n.model||!1,this.params=this.params||n.params||{},this.method=this.method||"GET",this.model=o(this.model)}return s.prototype.hasBody=function(){return/^(POST|PUT|PATCH)$/i.test(this.method)},s.prototype.expectsArray=function(){return!!this.isArray},s.prototype.convertToModel=function(t){if(e.isArray(t))return t.map(function(t){return this.convertToModel(t)},this);var r=n.get(this.model);return new r(t)},s.prototype.successInterceptor=function(t){var n=this.expectsArray();return e.isArray(t.data)!==n&&r.warn("Expected",n?"array":"object","as response, got",t.data),t.data||(n?[]:{})},s.prototype.errorInterceptor=function(e){return t.reject(e)},function(t,e){return new s(t,e)}}])}(window,window.angular),function(t,e,n){"use strict";e.module("Api.Model",[]).factory("$apiModel",function(){function t(t){this.fromObject(t)}return t.prototype.fromObject=function(t,n){if(!n)for(var r in this)this.hasOwnProperty(r)&&delete this[r];return e.isObject(t)?(e.forEach(t,function(t,e){this[e]=t},this),this):this},t.prototype.toObject=function(){var t=e.extend({},this);return t},t})}(window,window.angular),function(t,e,n){"use strict";e.module("Api.Service",["Api.Endpoint.Service","Api.Model"]).provider("$api",function(){this.defaults={verbose:!1,baseUrl:"/",actions:{query:{method:"GET",isArray:!0},get:{method:"GET"},create:{method:"POST"},update:{method:"PUT"},"delete":{method:"DELETE"}},params:{id:"@id"},model:"$apiModel",stripTrailingSlashes:!0},this.endpoints={},this.setVerbose=function(t){return this.defaults.verbose=!!t,this},this.setBaseUrl=function(t){return this.defaults.baseUrl=t,this},this.setDefaultActions=function(t){return this.defaults.actions=t||{},this},this.setDefaultParams=function(t){return this.defaults.params=t||{},this},this.setDefaultModel=function(t){return this.defaults.model=t||!1,this},this.stripTrailingSlashes=function(t){return this.defaults.stripTrailingSlashes=!!t,this},this.registerEndpoint=function(t,e){return t&&(this.endpoints[t]=e||{}),this},this.$get=["$injector","$log","$apiEndpoint",function(t,n,r){var i=function(t){return this[t]};return e.forEach(this.endpoints,function(t,o){i[o]&&n.warn("API endpoint",o,"is being overwritten."),t=e.extend({},this.defaults,t),t.verbose&&n.info("API endpoint",o+":",t),i[o]=r(o,t)},this),i}]})}(window,window.angular),function(t,e,n){"use strict";e.module("Api.DuplicateRequestsFilter.Decorator",[]).config(["$provide",function(t){t.decorator("$http",["$delegate","$q",function(t,n){function r(t){var e=0,n=t.length;if(0===n)return e;for(var r,i=0;n>i;++i)r=t.charCodeAt(i),e=(e<<5)-e+r,e&=e;return e>>>0}function i(t){var n=t.method+t.url;return t.data&&"object"==typeof t.data&&(n+=e.toJson(t.data)),r(n)}var o={},s=t,a=function(t){if(t.ignoreDuplicateRequest)return s(t);var e=i(t);return o[e]?t.rejectDuplicateRequest?n.reject({data:"",headers:{},status:t.rejectDuplicateStatusCode||400,config:t}):o[e]:(o[e]=s(t)["finally"](function(){delete o[e]}),o[e])};return Object.keys(s).filter(function(t){return"function"==typeof s[t]}).forEach(function(t){a[t]=s[t]}),a}])}])}(window,window.angular),function(t,e,n){"use strict";e.module("Api.Endpoint.Service",["Api.Action.Service","Api.Request.Service","Url.Service"]).factory("$apiEndpoint",["$url","$apiAction","$apiRequest",function(t,n,r){function i(i,o){o.url=t.concat(o.baseUrl,o.url||t.concat(i,":id")),o.actions=o.actions||{},this.$config=o,this.$actions={},e.forEach(o.actions,function(t,i){this.$actions[i]=n(t||{},o),this[i]=e.bind(this,r,this.$actions[i])},this)}return function(t,e){return new i(t,e)}}])}(window,window.angular),function(t,e,n){"use strict";e.module("Api.Request.Service",["Url.Service"]).factory("$apiRequest",["$http","$url",function(t,r){function i(t){return e.isObject(t)&&e.isFunction(t.toObject)}function o(t){return t&&"hasOwnProperty"!==t&&/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/.test("."+t)}function s(t,e){if(!o(e))throw new Error("Invalid dotted path:"+e);for(var r=e.split("."),i=0;i<r.length&&t!==n;i++){var s=r[i];t=null!==t?t[s]:n}return t}function a(t,n,r){var i={};return e.forEach(t||{},function(t,n){e.isFunction(t)&&(t=t()),e.isString(t)&&"@"===t.charAt(0)&&(t=s(r,t.substr(1))),i[n]=t}),e.extend(i,n||{})}function u(t){var n={};return e.forEach(t.split(/\W/),function(e){if("hasOwnProperty"===e)throw new Error("Invalid parameter name: hasOwnProperty");e&&!/^\\d+$/.test(e)&&new RegExp("(^|[^\\\\]):"+e+"(\\W|$)").test(t)&&(n[e]=!0)}),n}function c(t,e){return e&&(t=t.replace(/\/+$/,"")||"/"),t.replace(/\/\.(?=\w+($|\?))/,".").replace(/\/\\\./,"/.")}function l(t,n,i,o){return t=t.replace(/\\:/g,":"),e.forEach(i,function(i,o){var s,a=n.hasOwnProperty(o)?n[o]:null;if(e.isDefined(a)&&null!==a){var u=r.encodeUriSegment(a);s=new RegExp(":"+o+"(\\W|$)","g"),t=t.replace(s,function(t,e){return u+e})}else s=new RegExp("(/?):"+o+"(\\W|$)","g"),t=t.replace(s,function(t,e,n){return"/"===n.charAt(0)?n:e+n})}),c(t,o)}function f(t,n,r){var o={},s=["params","model","isArray","stripTrailingSlashes","successInterceptor","errorInterceptor"];e.forEach(t,function(t,n){-1===s.indexOf(n)&&(o[n]=e.copy(t))}),t.hasBody()&&r&&(i(r)&&(r=r.toObject()),o.data=r),n=a(t.params,n,r);var c=u(o.url);return o.url=l(t.url,n,c,t.stripTrailingSlashes),e.forEach(n,function(t,e){c[e]||(o.params=o.params||{},o.params[e]=t)}),o}return function(e,n,r){e.hasBody()&&n&&!r&&(r=n,n=null);var o=f(e,n,r),s=e.model&&/^(GET|POST|PUT|PATCH)$/i.test(e.method),a=t(o).then(e.successInterceptor.bind(e),e.errorInterceptor.bind(e));return a.then(function(t){return e.hasBody()&&i(r)?r.fromObject(t):s?e.convertToModel(t):t})}}])}(window,window.angular);
//# sourceMappingURL=meanie-angular-api.min.js.map
